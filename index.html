<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Controle de Vendas e Comiss√£o</title>

  <!-- Estilo -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="container">
  <h1>üìä Controle de Vendas</h1>

  <!-- Comiss√£o fixa -->
  <label>Porcentagem de Comiss√£o (%)</label>
  <input id="porcentagem" type="number" value="2" disabled>

  <div class="mesAno">
    <select id="mes" onchange="atualizar()">
      <option value="01">Janeiro</option>
      <option value="02">Fevereiro</option>
      <option value="03">Mar√ßo</option>
      <option value="04">Abril</option>
      <option value="05">Maio</option>
      <option value="06">Junho</option>
      <option value="07">Julho</option>
      <option value="08">Agosto</option>
      <option value="09">Setembro</option>
      <option value="10">Outubro</option>
      <option value="11">Novembro</option>
      <option value="12">Dezembro</option>
    </select>

    <input id="ano" type="number" value="2026" onchange="function atualizar() {
  const mes = document.getElementById("mes").value;
  const ano = document.getElementById("ano").value;
  const lista = document.getElementById("lista");

  lista.innerHTML = "";

  let totalVendas = 0;
  let totalComissao = 0;

  // FILTRA PRIMEIRO
  const vendasFiltradas = vendas.filter(v =>
    v.mes === mes && v.ano === ano
  );

  vendasFiltradas.forEach(v => {
    const valor = Number(v.valor);
    const comissao = valor * (COMISSAO / 100);

    totalVendas += valor;
    totalComissao += comissao;

    lista.innerHTML += `
      <tr>
        <td>${v.cliente}</td>
        <td>R$ ${valor.toFixed(2)}</td>
        <td>R$ ${comissao.toFixed(2)}</td>
        <td>
          <button onclick="removerVenda('${v.cliente}', ${valor})">‚ùå</button>
        </td>
      </tr>
    `;
  });

  document.getElementById("totalVendas").innerText = totalVendas.toFixed(2);
  document.getElementById("totalComissao").innerText = totalComissao.toFixed(2);
}
  </div>

  <hr>

  <!-- Cadastro da venda -->
  <input id="cliente" placeholder="Nome da venda / cliente">
  <input id="valor" type="number" placeholder="Valor da venda">

  <button onclick="adicionar()">‚ûï Adicionar Venda</button>

  <!-- Totais -->
  <h3>Total de Vendas: R$ <span id="totalVendas">0.00</span></h3>
  <h3>üí∞ Total de Comiss√£o: R$ <span id="totalComissao">0.00</span></h3>

  <!-- Lista -->
  <table>
    <thead>
      <tr>
        <th>Venda</th>
        <th>Valor</th>
        <th>Comiss√£o</th>
        <th>A√ß√£o</th>
      </tr>
    </thead>
    <tbody id="lista"></tbody>
  </table>
</div>

<script src="script.js"></script>
</body>
</html>
