<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Controle de Vendas e ComissÃ£o</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 20px;
}
.container {
  max-width: 1000px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
}
h1 {
  text-align: center;
}
input, select, button {
  width: 100%;
  padding: 10px;
  margin: 6px 0;
}
button {
  background: #007bff;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
button:hover {
  background: #0056b3;
}
.card {
  background: #fafafa;
  padding: 15px;
  border-radius: 10px;
  margin-top: 15px;
}
.resumo {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.box {
  flex: 1;
  background: #fff;
  padding: 15px;
  border-radius: 10px;
  text-align: center;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
th {
  background: #007bff;
  color: white;
}
.excluir {
  background: #dc3545;
}
.excluir:hover {
  background: #b52a37;
}
</style>
</head>

<body>

<div class="container">
<h1>ðŸ“Š Controle de Vendas & ComissÃ£o</h1>

<!-- CONFIG -->
<div class="card">
<h3>ConfiguraÃ§Ã£o da ComissÃ£o</h3>
<input id="percentual" type="number" value="5">
<p>Porcentagem de comissÃ£o (%)</p>
</div>

<!-- FILTRO -->
<div class="card">
<h3>MÃªs de ReferÃªncia</h3>
<select id="mes">
  <option value="01">Janeiro</option>
  <option value="02">Fevereiro</option>
  <option value="03">MarÃ§o</option>
  <option value="04">Abril</option>
  <option value="05">Maio</option>
  <option value="06">Junho</option>
  <option value="07">Julho</option>
  <option value="08">Agosto</option>
  <option value="09">Setembro</option>
  <option value="10">Outubro</option>
  <option value="11">Novembro</option>
  <option value="12">Dezembro</option>
</select>
<input id="ano" type="number" value="2026">
</div>

<!-- NOVA VENDA -->
<div class="card">
<h3>Nova Venda</h3>
<input id="cliente" placeholder="Nome do cliente">
<input id="valor" type="number" placeholder="Valor da venda">
<button onclick="adicionar()">Adicionar Venda</button>
</div>

<!-- RESUMO -->
<div class="card resumo">
  <div class="box">
    <h3>Total Vendido</h3>
    <p>R$ <span id="totalVendido">0</span></p>
  </div>
  <div class="box">
    <h3>Total ComissÃ£o</h3>
    <p>R$ <span id="totalComissao">0</span></p>
  </div>
</div>

<!-- LISTA -->
<div class="card">
<h3>Vendas do MÃªs</h3>
<table>
<thead>
<tr>
<th>Cliente</th>
<th>Venda</th>
<th>%</th>
<th>ComissÃ£o</th>
<th>AÃ§Ã£o</th>
</tr>
</thead>
<tbody id="lista"></tbody>
</table>
</div>

</div>

<script>
let vendas = JSON.parse(localStorage.getItem("vendasComissao")) || [];

function adicionar() {
  vendas.push({
    cliente: cliente.value,
    valor: +valor.value,
    mes: mes.value,
    ano: ano.value
  });
  salvar();
}

function excluir(i) {
  vendas.splice(i, 1);
  salvar();
}

function salvar() {
  localStorage.setItem("vendasComissao", JSON.stringify(vendas));
  atualizar();
}

function atualizar() {
  lista.innerHTML = "";
  let total = 0;
  let comissao = 0;
  const perc = +percentual.value;

  const filtrado = vendas.filter(v => v.mes === mes.value && v.ano == ano.value);

  filtrado.forEach((v, i) => {
    const c = v.valor * (perc / 100);
    total += v.valor;
    comissao += c;

    lista.innerHTML += `
      <tr>
        <td>${v.cliente}</td>
        <td>R$ ${v.valor.toFixed(2)}</td>
        <td>${perc}%</td>
        <td>R$ ${c.toFixed(2)}</td>
        <td><button class="excluir" onclick="excluir(${i})">Excluir</button></td>
      </tr>`;
  });

  totalVendido.innerText = total.toFixed(2);
  totalComissao.innerText = comissao.toFixed(2);
}

atualizar();
</script>

</body>
</html>
